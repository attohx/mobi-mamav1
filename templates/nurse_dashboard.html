{% extends "base.html" %}
{% block content %}

<div class="container py-5">
  <h2 class="fw-bold mb-4 text-center" style="color:var(--teal);">
    üë©üèΩ‚Äç‚öïÔ∏è Clinic Dashboard
  </h2>

  <div class="row g-4">
    <!-- Health Tips Section -->
    <div class="col-lg-6">
      <div class="dashboard-card shadow-sm p-4 rounded-4">
        <div class="d-flex justify-content-between align-items-center mb-3">
          <h4 class="fw-semibold" style="color:var(--teal);">Health Tips</h4>
          <a href="{{ url_for('clinic.add_tip') }}" class="btn btn-coral btn-sm">+ Add Tip</a>
        </div>

        {% if tips %}
        <div class="table-responsive">
          <table class="table align-middle table-hover">
            <thead style="background-color:var(--aqua-light);">
              <tr>
                <th>Title</th>
                <th>Language</th>
                <th>Date</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              {% for tip in tips %}
              <tr>
                <td>{{ tip.title }}</td>
                <td>{{ tip.language|upper }}</td>
                <td>{{ tip.created_at.strftime('%Y-%m-%d') }}</td>
                <td>
                  <a href="{{ url_for('clinic.edit_tip', tip_id=tip.id) }}" class="btn btn-sm btn-primary">Edit</a>
                  <a href="{{ url_for('clinic.delete_tip', tip_id=tip.id) }}" class="btn btn-sm btn-danger" onclick="return confirm('Are you sure?')">Delete</a>
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
        {% else %}
          <p class="text-muted">No tips available yet.</p>
        {% endif %}
      </div>
    </div>

    <!-- Appointments Section -->
    <div class="col-lg-6">
      <div class="dashboard-card shadow-sm p-4 rounded-4">
        <h4 class="fw-semibold mb-3" style="color:var(--teal);">Appointments</h4>

        {% if appts %}
        <div class="table-responsive">
          <table class="table align-middle table-hover">
            <thead style="background-color:var(--aqua-light);">
              <tr>
                <th>Mother</th>
                <th>Phone</th>
                <th>Clinic</th>
                <th>Date</th>
                <th>Status</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              {% for appt in appts %}
              <tr>
                <td>{{ appt.mother_name }}</td>
                <td>{{ appt.phone }}</td>
                <td>{{ appt.clinic }}</td>
                <td>{{ appt.date }}</td>
                <td>{{ appt.status|capitalize if appt.status else 'Pending' }}</td>
                <td>
                  <a href="{{ url_for('clinic.edit_appointment', appt_id=appt.id) }}" class="btn btn-sm btn-primary">Edit</a>
                  {% if appt.status == 'pending' %}
                  <a href="{{ url_for('clinic.cancel_appointment', appt_id=appt.id) }}" class="btn btn-sm btn-warning">Cancel</a>
                  {% endif %}
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
        {% else %}
          <p class="text-muted">No appointments yet.</p>
        {% endif %}
      </div>
    </div>
  </div>
</div>

{% endblock %}
